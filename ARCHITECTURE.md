# üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –º—É–ª—å—Ç–∏–∞–≥–µ–Ω—Ç–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —É–∑–∫–∏—Ö –º–µ—Å—Ç.

## –û–±—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                        Frontend (Next.js)                    ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îÇ
‚îÇ  ‚îÇ  Discovery   ‚îÇ‚îÄ‚ñ∂‚îÇ Bottlenecks  ‚îÇ‚îÄ‚ñ∂‚îÇ    Prompt    ‚îÇ     ‚îÇ
‚îÇ  ‚îÇ    Form      ‚îÇ  ‚îÇ   Analysis   ‚îÇ  ‚îÇ   Display    ‚îÇ     ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îÇ
‚îÇ         ‚îÇ                  ‚îÇ                  ‚îÇ             ‚îÇ
‚îÇ         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò             ‚îÇ
‚îÇ                            ‚îÇ                                ‚îÇ
‚îÇ                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                      ‚îÇ
‚îÇ                    ‚îÇ  Zustand Store ‚îÇ                      ‚îÇ
‚îÇ                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                             ‚îÇ
                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                    ‚îÇ   API Routes    ‚îÇ
                    ‚îÇ  /api/analyze   ‚îÇ
                    ‚îÇ  /api/generate  ‚îÇ
                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                             ‚îÇ
              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
              ‚îÇ                             ‚îÇ
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ ValueChainAnalyzer ‚îÇ      ‚îÇ  PromptGenerator   ‚îÇ
    ‚îÇ     (Agent 1)      ‚îÇ      ‚îÇ     (Agent 2)      ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
              ‚îÇ                           ‚îÇ
              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                         ‚îÇ
                  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                  ‚îÇ  OpenAI     ‚îÇ
                  ‚îÇ  GPT-4      ‚îÇ
                  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## –°–ª–æ–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### 1. –ü—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–æ–Ω–Ω—ã–π —Å–ª–æ–π (UI Components)

#### DiscoveryForm
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –°–±–æ—Ä –ø–µ—Ä–≤–∏—á–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –±–∏–∑–Ω–µ—Å–µ
- **–°–æ—Å—Ç–æ—è–Ω–∏–µ**: –õ–æ–∫–∞–ª—å–Ω–æ–µ (useState)
- **–í–∞–ª–∏–¥–∞—Ü–∏—è**: –í—Å–µ –ø–æ–ª—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã, teamSize > 0
- **–°–æ–±—ã—Ç–∏—è**: onSubmit ‚Üí –≤—ã–∑—ã–≤–∞–µ—Ç API /analyze

#### BottlenecksList
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —É–∑–∫–∏—Ö –º–µ—Å—Ç
- **Props**: bottlenecks[], selectedBottleneck, onSelect
- **–§–∏—á–∏**: 
  - –¶–≤–µ—Ç–æ–≤–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞
  - –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏
  - –í—ã–¥–µ–ª–µ–Ω–∏–µ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞

#### BottleneckDetail
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —É–∑–∫–æ–≥–æ –º–µ—Å—Ç–∞
- **–°–µ–∫—Ü–∏–∏**:
  - –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã
  - –ú–µ—Ç–∞–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è (–æ–±–ª–∞—Å—Ç—å, –≤–ª–∏—è–Ω–∏–µ, –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª)
  - As-Is –ø—Ä–æ—Ü–µ—Å—Å
  - To-Be –ø—Ä–æ—Ü–µ—Å—Å
  - –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—ã–µ –∞–≥–µ–Ω—Ç—ã
  - MCP –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
- **–î–µ–π—Å—Ç–≤–∏—è**: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–æ–º–ø—Ç–∞

#### PromptDisplay
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø—Ä–æ–º–ø—Ç–∞
- **–§–∏—á–∏**:
  - Syntax highlighting (–º–æ–Ω–æ–ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π —à—Ä–∏—Ñ—Ç)
  - –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ clipboard
  - –ù–∞–≤–∏–≥–∞—Ü–∏—è –Ω–∞–∑–∞–¥

### 2. –°–ª–æ–π —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º (Zustand)

```typescript
interface AppState {
  // –¢–µ–∫—É—â–∏–π —ç—Ç–∞–ø
  stage: "discovery" | "bottlenecks" | "prompt"
  
  // –î–∞–Ω–Ω—ã–µ –±–∏–∑–Ω–µ—Å–∞
  businessData: BusinessData | null
  
  // –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞
  bottlenecks: Bottleneck[]
  selectedBottleneck: Bottleneck | null
  
  // –†–µ–∑—É–ª—å—Ç–∞—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
  generatedPrompt: string
  
  // UI —Å–æ—Å—Ç–æ—è–Ω–∏–µ
  isLoading: boolean
  error: string | null
  
  // –î–µ–π—Å—Ç–≤–∏—è
  setStage: (stage) => void
  setBusinessData: (data) => void
  setBottlenecks: (bottlenecks) => void
  setSelectedBottleneck: (bottleneck) => void
  setGeneratedPrompt: (prompt) => void
  setLoading: (isLoading) => void
  setError: (error) => void
  reset: () => void
}
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ Zustand**:
- –ü—Ä–æ—Å—Ç–æ–π API
- –ù–µ—Ç boilerplate –∫–æ–¥–∞
- TypeScript out of the box
- –•–æ—Ä–æ—à–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### 3. API Layer (Next.js API Routes)

#### POST /api/analyze

**–¶–µ–ª—å**: –ê–Ω–∞–ª–∏–∑ –±–∏–∑–Ω–µ—Å–∞ –∏ –≤—ã—è–≤–ª–µ–Ω–∏–µ —É–∑–∫–∏—Ö –º–µ—Å—Ç

**Workflow**:
```
1. –ü–æ–ª—É—á–∏—Ç—å businessData –∏–∑ request body
2. –í–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ
3. –í—ã–∑–≤–∞—Ç—å analyzeValueChain(businessData)
4. –í–µ—Ä–Ω—É—Ç—å –º–∞—Å—Å–∏–≤ bottlenecks
```

**Request**:
```json
{
  "businessData": {
    "productDescription": "string",
    "teamSize": 10,
    "workflows": "string",
    "kpis": "string"
  }
}
```

**Response**:
```json
{
  "bottlenecks": [
    {
      "id": "bottleneck_123",
      "title": "–°–ª–∞–±—ã–π —Ñ–æ–ª–ª–æ—É-–∞–ø",
      "processArea": "–ü—Ä–æ–¥–∞–∂–∏",
      "problemDescription": "...",
      "currentImpact": "...",
      "priority": "high",
      "potentialGain": "...",
      "asIsProcess": "...",
      "toBeProcess": "...",
      "suggestedAgents": ["Agent1", "Agent2"],
      "mcpToolsNeeded": ["email", "crm"]
    }
  ]
}
```

#### POST /api/generate-prompt

**–¶–µ–ª—å**: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–æ–º–ø—Ç–∞ –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —É–∑–∫–æ–≥–æ –º–µ—Å—Ç–∞

**Workflow**:
```
1. –ü–æ–ª—É—á–∏—Ç—å businessData –∏ bottleneck –∏–∑ request
2. –í–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ
3. –í—ã–∑–≤–∞—Ç—å generateImplementationPrompt(businessData, bottleneck)
4. –í–µ—Ä–Ω—É—Ç—å –≥–æ—Ç–æ–≤—ã–π –ø—Ä–æ–º–ø—Ç
```

**Request**:
```json
{
  "businessData": {...},
  "bottleneck": {...}
}
```

**Response**:
```json
{
  "prompt": "# –ü–æ–ª–Ω—ã–π –ø—Ä–æ–º–ø—Ç –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏..."
}
```

### 4. –ú—É–ª—å—Ç–∏–∞–≥–µ–Ω—Ç–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞

#### Agent 1: ValueChainAnalyzer

**–†–æ–ª—å**: –ê–Ω–∞–ª–∏—Ç–∏–∫ –±–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å–æ–≤

**–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**:
- –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞/—É—Å–ª—É–≥–∏
- –†–∞–∑–º–µ—Ä –∫–æ–º–∞–Ω–¥—ã
- –û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ—Ç–æ–∫–∏ —Ä–∞–±–æ—Ç—ã
- –ö–ª—é—á–µ–≤—ã–µ KPI

**–ü—Ä–æ—Ü–µ—Å—Å –∞–Ω–∞–ª–∏–∑–∞**:
1. –ü–∞—Ä—Å–∏–Ω–≥ –∏ –ø–æ–Ω–∏–º–∞–Ω–∏–µ –±–∏–∑–Ω–µ—Å-–∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
2. –ê–Ω–∞–ª–∏–∑ –∫–∞–∂–¥–æ–≥–æ –ø–æ—Ç–æ–∫–∞ —Ä–∞–±–æ—Ç—ã
3. –í—ã—è–≤–ª–µ–Ω–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –ø—Ä–æ–±–ª–µ–º:
   - –†—É—á–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã ‚Üí –∫–∞–Ω–¥–∏–¥–∞—Ç—ã –Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—é
   - –í—ã—Å–æ–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ ‚Üí –∫–∞–Ω–¥–∏–¥–∞—Ç—ã –Ω–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é
   - –ù–∏–∑–∫–∞—è –∫–æ–Ω–≤–µ—Ä—Å–∏—è ‚Üí –ø—Ä–æ–±–ª–µ–º—ã –≤ –≤–æ—Ä–æ–Ω–∫–µ
   - –í—ã—Å–æ–∫–∏–π churn ‚Üí –ø—Ä–æ–±–ª–µ–º—ã —Å retention
4. –ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è –ø–æ ROI
5. –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –æ–ø–∏—Å–∞–Ω–∏—è –∫–∞–∂–¥–æ–≥–æ —É–∑–∫–æ–≥–æ –º–µ—Å—Ç–∞

**–ü—Ä–æ–º–ø—Ç-—Å—Ç—Ä–∞—Ç–µ–≥–∏—è**:
- –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞: 0.7 (–±–∞–ª–∞–Ω—Å –∫—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∏ —Ç–æ—á–Ω–æ—Å—Ç–∏)
- –ú–æ–¥–µ–ª—å: GPT-4 Turbo
- –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π output (JSON)

**–¢–∏–ø–∏—á–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã**:

```
IF –ø—Ä–æ—Ü–µ—Å—Å —Å–æ–¥–µ—Ä–∂–∏—Ç "—Ä—É—á–Ω–∞—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞"
  THEN —É–∑–∫–æ–µ –º–µ—Å—Ç–æ = "–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤"
  
IF KPI —Å–æ–¥–µ—Ä–∂–∏—Ç "churn" –ò –µ—Å—Ç—å "—Ç–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–∞"
  THEN —É–∑–∫–æ–µ –º–µ—Å—Ç–æ = "–ü—Ä–æ–∞–∫—Ç–∏–≤–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞"
  
IF –µ—Å—Ç—å "–ø—Ä–æ–¥–∞–∂–∏" –ò "–¥–æ–ª–≥–∏–π —Ü–∏–∫–ª —Å–¥–µ–ª–∫–∏"
  THEN —É–∑–∫–æ–µ –º–µ—Å—Ç–æ = "–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —Ñ–æ–ª–ª–æ—É-–∞–ø"
```

#### Agent 2: PromptGenerator

**–†–æ–ª—å**: –ê—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä –º—É–ª—å—Ç–∏–∞–≥–µ–Ω—Ç–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏–π

**–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**:
- –ë–∏–∑–Ω–µ—Å-–∫–æ–Ω—Ç–µ–∫—Å—Ç
- –ö–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ —É–∑–∫–æ–µ –º–µ—Å—Ç–æ
- As-Is –∏ To-Be –ø—Ä–æ—Ü–µ—Å—Å—ã
- –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—ã–µ –∞–≥–µ–Ω—Ç—ã

**–ü—Ä–æ—Ü–µ—Å—Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏**:
1. –ê–Ω–∞–ª–∏–∑ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –∫ —Ä–µ—à–µ–Ω–∏—é
2. –ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –º—É–ª—å—Ç–∏–∞–≥–µ–Ω—Ç–∞:
   - –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–æ–ª–µ–π –∞–≥–µ–Ω—Ç–æ–≤
   - –ì—Ä–∞—Ñ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è
   - –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã (MCP)
3. –°–æ–∑–¥–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –ø—Ä–æ–º–ø—Ç–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∞–≥–µ–Ω—Ç–∞
4. –ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ UI/UX
5. –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ API –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤
6. –ù–∞–ø–∏—Å–∞–Ω–∏–µ –ø–æ—à–∞–≥–æ–≤—ã—Ö –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º–æ–≥–æ –ø—Ä–æ–º–ø—Ç–∞**:

```markdown
# –ö–æ–Ω—Ç–µ–∫—Å—Ç –ø—Ä–æ–µ–∫—Ç–∞
[–ë–∏–∑–Ω–µ—Å + –ü—Ä–æ–±–ª–µ–º–∞ + –¶–µ–ª–∏]

# –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –º—É–ª—å—Ç–∏–∞–≥–µ–Ω—Ç–∞
[–ê–≥–µ–Ω—Ç—ã + –ì—Ä–∞—Ñ + –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã]

# –ü—Ä–æ–º–ø—Ç—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∞–≥–µ–Ω—Ç–∞
[–î–µ—Ç–∞–ª—å–Ω—ã–µ —Å–∏—Å—Ç–µ–º–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã]

# –§—Ä–æ–Ω—Ç–æ–≤–∞—è —á–∞—Å—Ç—å (UI/UX)
[–≠–∫—Ä–∞–Ω—ã + –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã + API]

# –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
[–ü–æ—à–∞–≥–æ–≤—ã–π –ø–ª–∞–Ω]
```

**–ü—Ä–æ–º–ø—Ç-—Å—Ç—Ä–∞—Ç–µ–≥–∏—è**:
- –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞: 0.7
- –ú–æ–¥–µ–ª—å: GPT-4 Turbo
- MaxTokens: 4000
- Markdown —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 5. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å LangChain

**–ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**:

```typescript
// –ú–æ–¥–µ–ª—å
ChatOpenAI({
  modelName: 'gpt-4-turbo-preview',
  temperature: 0.7,
})

// –®–∞–±–ª–æ–Ω—ã –ø—Ä–æ–º–ø—Ç–æ–≤
PromptTemplate.fromTemplate(template)

// –í –±—É–¥—É—â–µ–º: –≥—Ä–∞—Ñ –∞–≥–µ–Ω—Ç–æ–≤
StateGraph –¥–ª—è –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏–∏
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ LangChain**:
- –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å LLM
- –®–∞–±–ª–æ–Ω—ã –ø—Ä–æ–º–ø—Ç–æ–≤ —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ streaming
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –¥–æ LangGraph

## Flow –¥–∞–Ω–Ω—ã—Ö

### Discovery ‚Üí Bottlenecks

```
User fills form
    ‚îÇ
    ‚ñº
handleDiscoverySubmit()
    ‚îÇ
    ‚ñº
POST /api/analyze
    ‚îÇ
    ‚ñº
analyzeValueChain()
    ‚îÇ
    ‚îú‚îÄ‚ñ∂ Format prompt with business data
    ‚îú‚îÄ‚ñ∂ Call GPT-4
    ‚îú‚îÄ‚ñ∂ Parse JSON response
    ‚îî‚îÄ‚ñ∂ Add unique IDs
    ‚îÇ
    ‚ñº
Return bottlenecks[]
    ‚îÇ
    ‚ñº
Update store
    ‚îÇ
    ‚ñº
Navigate to "bottlenecks" stage
    ‚îÇ
    ‚ñº
Render BottlenecksList + BottleneckDetail
```

### Bottlenecks ‚Üí Prompt

```
User clicks "Generate prompt"
    ‚îÇ
    ‚ñº
handleGeneratePrompt()
    ‚îÇ
    ‚ñº
POST /api/generate-prompt
    ‚îÇ
    ‚ñº
generateImplementationPrompt()
    ‚îÇ
    ‚îú‚îÄ‚ñ∂ Format prompt with business + bottleneck
    ‚îú‚îÄ‚ñ∂ Call GPT-4
    ‚îî‚îÄ‚ñ∂ Return markdown text
    ‚îÇ
    ‚ñº
Update store with prompt
    ‚îÇ
    ‚ñº
Navigate to "prompt" stage
    ‚îÇ
    ‚ñº
Render PromptDisplay
```

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### API Key Protection
- API –∫–ª—é—á —Ö—Ä–∞–Ω–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ environment variables
- –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –Ω–∞ –∫–ª–∏–µ–Ω—Ç

### Input Validation
- –í—Å–µ –ø–æ–ª—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã
- teamSize >= 1
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –ø–æ–ª–µ–π

### Error Handling
- Try-catch –Ω–∞ –≤—Å–µ—Ö API endpoints
- –ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
- Graceful fallbacks

## –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –∞–≥–µ–Ω—Ç–æ–≤

```typescript
// 1. –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ–≥–æ –∞–≥–µ–Ω—Ç–∞
export async function newAgent(input: any) {
  // –õ–æ–≥–∏–∫–∞ –∞–≥–µ–Ω—Ç–∞
}

// 2. –î–æ–±–∞–≤–∏—Ç—å API endpoint
export async function POST(request: NextRequest) {
  const result = await newAgent(data);
  return NextResponse.json(result);
}

// 3. –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ UI
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —ç–∫—Ä–∞–Ω–æ–≤

```typescript
// 1. –°–æ–∑–¥–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
export default function NewScreen() {...}

// 2. –î–æ–±–∞–≤–∏—Ç—å stage –≤ store
type Stage = "discovery" | "bottlenecks" | "prompt" | "new-stage"

// 3. –î–æ–±–∞–≤–∏—Ç—å —É—Å–ª–æ–≤–∏–µ –≤ page.tsx
if (stage === 'new-stage') {
  return <NewScreen />
}
```

## Performance –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### Client-side
- Zustand –¥–ª—è –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ re-rendering
- Lazy loading –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ (–ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏)
- Debounce –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –≤–≤–æ–¥–∞

### Server-side
- Streaming responses (–º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å)
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∞–Ω–∞–ª–∏–∑–∞
- Rate limiting –¥–ª—è API

### LLM –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã (–º–µ–Ω—å—à–µ —Ç–æ–∫–µ–Ω–æ–≤)
- –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- Batch processing (–ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏)

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –æ—Ç–ª–∞–¥–∫–∞

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
```typescript
console.error('Error in /api/analyze:', error);
```

### Error boundaries
- Next.js error handling
- Zustand error state
- UI error messages

### Metrics
- –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ API
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–∫–µ–Ω–æ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ
- –£—Å–ø–µ—à–Ω–æ—Å—Ç—å –∞–Ω–∞–ª–∏–∑–∞

---

–≠—Ç–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç:
- ‚úÖ –ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å
- ‚úÖ –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å
- ‚úÖ –ü–æ–Ω—è—Ç–Ω–æ—Å—Ç—å –∫–æ–¥–∞
- ‚úÖ –õ–µ–≥–∫–æ—Å—Ç—å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

